---
title: 如何設定 App-V 系統以升級封裝
description: 如何設定 App-V 系統以升級封裝
author: dansimp
ms.assetid: de133898-f887-46c1-9bc9-fbb03feac66a
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 5e5056f923c61aff39d9bd6e1d26f071177f7c12
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/26/2020
ms.locfileid: "10801581"
---
# 如何設定 App-V 系統以升級封裝


當您部署已在 App-v 排序器中升級之現有應用程式套件的新版本時，您可以將它部署，以便 App-v 用戶端自動將新版本資料流程傳輸到本機快取。 視您使用的流式處理方案而定，會有不同的程式來設定套件升級。 下列各節說明最常見的發佈和資料流程案例，並包含針對每個案例設定套件升級所需的程式。

## 使用管理伺服器進行發佈與流式處理


在這種情況下，單一 App V 管理伺服器可用於套件和應用程式的發佈和資料流程，而且需要 RTSP （S）通訊協定。 當原始套件匯入到 App-v 管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。 系統管理員也會編輯 OSD 檔案中的 HREF 專案，以指向 [套件] 資料夾中的 SFT 檔案，然後將套件匯入伺服器。

當使用者由管理伺服器驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。 用戶端接著會從管理伺服器檢索應用程式的 OSD 檔案和圖示。 當使用者按兩下應用程式圖示時，應用程式內容會從 OSD 檔案中指定的路徑傳送到用戶端快取，並啟動應用程式。

### 若要升級套件

若要新增已在 App-v 排序器中升級之應用程式的新版本，系統管理員必須將新的 SFT 檔案及任何其他修改過的檔案複製到與應用程式原始版本相同的資料夾中。 系統管理員接著會使用 [伺服器管理] 主控台中的 [新增**版本**] 來新增套件的新版本。

當使用者下一次啟動應用程式時，伺服器會自動將新版本資料流程傳送給用戶端。 這種升級套件的特定方法先前稱為 [作用中升級]。

## 使用管理伺服器來發佈及流式處理伺服器以進行流式處理


在這種情況下，App-V 管理伺服器用於發佈套件，而流式處理伺服器則用於流式套件和應用程式。 需要 RTSP （S）協定。 當原始套件匯入管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。 系統管理員編輯 OSD 檔案中的 HREF 專案，以指向流式處理伺服器上的 SFT 檔案，然後將套件匯入管理伺服器。

若要設定流式處理伺服器，系統管理員會將 [套件] 資料夾從管理伺服器複製到流式處理伺服器上的 [內容] 資料夾。 這個資料夾的名稱和相對路徑必須與管理伺服器上的資料流程伺服器內容資料夾相同，例如 \\\\streamingserver\\CONTENT\\packagename。

如果用戶端的 [應用程式來源根（ASR）] 設定已設定為指向 [流式處理伺服器]，則用戶端會在 OSD 檔案的 HREF 專案中使用這個設定，而不是伺服器名稱。 用戶端上的 ISR 與 OSR 欄位可以選擇性地設定為指向管理伺服器或流式處理伺服器（視所使用的特定系統架構而定）。

當使用者由管理伺服器驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。 根據 [OSR] 和 [ISR] 欄位中的設定，用戶端會從流式處理伺服器或管理伺服器來檢索應用程式的 OSD 檔案和圖示。

當使用者按兩下應用程式圖示時，用戶端會使用包含在 OSD file HREF 元素中之套件內容檔案（SFT）的路徑。 如果使用 ASR，用戶端會將 HREF 元素中的伺服器名稱（以及埠和通訊協定）取代為在 ASR 中指定之流式處理伺服器的路徑。 然後，應用程式就會從流式伺服器傳送到用戶端快取，並啟動。

### 若要升級套件

若要新增已在 App-v 排序器中升級之應用程式的新版本，系統管理員必須將新版本的 SFT 檔案及任何其他修改過的檔案複製到與流式伺服器上原始版本之應用程式相同的資料夾中。

為了保持一致性，我們建議您也將新檔案複製到管理伺服器上的資料夾。 特別是，如果您使用用戶端的 OSR 或 ISR 欄位，請將更新的 OSD 檔案和圖示複製到 [OSR] 和 [ISR] 欄位中指定的伺服器。

在流式處理伺服器偵測到新版本之後，使用者下次啟動應用程式時，伺服器會自動將新版本資料流程傳送給用戶端。

## 使用管理伺服器來發佈及進行流式處理的 IIS 伺服器


在這種情況下，App V 管理伺服器是用來發佈套件，而 IIS 伺服器則用於流式套件和應用程式。 當原始套件匯入管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。 系統管理員編輯 OSD 檔案中的 HREF 專案，使其指向 IIS 伺服器上的 SFT 檔案，然後將套件匯入管理伺服器。

若要設定用於流式處理的 IIS 伺服器，系統管理員會將 [套件] 資料夾從管理伺服器複製到 IIS 伺服器的 [內容] 資料夾。 這個資料夾的名稱和相對路徑必須與管理伺服器上的 IIS 伺服器 [網頁內容] 資料夾相同;例如，您可以使用 or 來存取 IIS 伺服器上的 URL http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename 。

如果用戶端的 [應用程式來源根（ASR）] 設定已設定為指向 IIS 伺服器，則用戶端會在 OSD 檔案的 HREF 專案中使用 ASR，而不是伺服器名稱。 您可以選擇性地設定用戶端上的 ISR 與 OSR 欄位，以指向管理伺服器或 IIS 伺服器（視您所使用的特定系統架構而定）。

當管理伺服器對使用者進行驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。 用戶端從 IIS 伺服器或管理伺服器檢索應用程式的 OSD 檔案和圖示，視 ISR 與 OSR 欄位中的設定而定。

當使用者按兩下應用程式圖示時，用戶端會使用包含在 OSD file HREF 元素中之套件內容檔案（SFT）的路徑。 如果使用 ASR，用戶端會將 HREF 元素中的伺服器名稱（以及埠和通訊協定）替換為在 ASR 中指定之 IIS 伺服器的路徑。 接著，應用程式就會使用 HTTP （S）通訊協定，從 IIS 伺服器傳送到用戶端快取。

### 若要升級套件

升級套件的程式如下所示：

-   將新版本的 OSD 檔案複製到管理伺服器內容資料夾下的原始版本資料夾（例如 \\\\server\\CONTENT\\packagename），然後取代現有的 OSD 檔案。 為保持一致性，請複製任何其他修改過的檔案。 如果使用用戶端的 OSR 或 ISR 欄位，則也會將更新的 OSD 檔案和圖示複製到 [OSR] 和 [ISR] 欄位中指定的伺服器。

-   將新版本的 SFT 檔案複製到 IIS 伺服器的 [網頁內容] 資料夾底下的 [套件] 資料夾中;例如，您可以使用 or 來存取 IIS 伺服器上的 URL http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename 。

在下一次發佈更新時，用戶端會使用新版本的 OSD 檔案進行更新。 此檔案現在會指向新版本的 SFT 檔案;因此，當使用者接著按兩下應用程式圖示時，就會啟動新的版本。

## 使用管理伺服器發佈和檔案共用以進行流式處理


在這種情況下，App-V 管理伺服器用於發佈套件，而檔案伺服器則用於流式套件和應用程式。 當原始套件匯入管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。 系統管理員編輯 OSD 檔案中的 HREF 專案，讓它指向檔案伺服器上的 SFT 檔案，然後將套件匯入管理伺服器。

若要設定流式處理的檔案伺服器，系統管理員會將 [套件] 資料夾從管理伺服器複製到檔案伺服器上的 [內容] 資料夾。 此資料夾的名稱和相對路徑必須與管理伺服器上的檔案伺服器內容資料夾相同（例如 \\\\fileserver\\CONTENT\\packagename.）。

如果用戶端的應用程式來源根（ASR）設定設定為使用 UNC 路徑指向檔案伺服器（例如 \\\\fileserver\\content），用戶端會在 OSD 檔案的 HREF 專案中使用這個設定，而不是伺服器名稱。 系統管理員可以選擇性地設定用戶端上的 ISR 與 OSR 欄位，以指向管理伺服器或檔案伺服器（視所使用的特定系統架構而定）。

當管理伺服器對使用者進行驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。 用戶端從檔案伺服器或管理伺服器上的應用程式來檢索 OSD 檔案和圖示，視 ISR 與 OSR 欄位中的設定而定。

當使用者按兩下應用程式圖示時，用戶端會使用包含在 OSD file HREF 元素中之套件內容檔案（SFT）的路徑。 如果使用 ASR，用戶端會將 HREF 元素中的伺服器名稱（以及埠和通訊協定）取代為在 ASR 中指定的檔案伺服器路徑。 接著，應用程式就會從檔案伺服器傳送到用戶端快取，並啟動。

### 若要升級套件

升級套件的程式如下所示：

-   將新版本的 OSD 檔案複製到管理伺服器內容資料夾下的原始版本資料夾，例如 \\\\server\\CONTENT\\packagename，取代現有的 OSD 檔案。 您應該複製任何其他已修改的檔案，並加以保持一致性。 如果使用用戶端的 OSR 或 ISR 欄位，則也會將更新的 OSD 檔案和圖示複製到 [OSR] 和 [ISR] 欄位中指定的伺服器。

-   將新版本的 SFT 檔案複製到檔案伺服器的 [內容] 資料夾底下的 [套件] 資料夾，例如 \\\\fileserver\\CONTENT\\packagename。 將 V2 SFT 檔案複製到檔案伺服器上的內容共用下的資料夾，例如 \\\\fileserver\\CONTENT\\packagename\\V1。

在下一次發佈時，重新整理用戶端會使用新版本的 OSD 檔案進行更新。 此檔案現在會指向新版本的 SFT 檔案，因此當使用者下一次按兩下應用程式圖示時，就會啟動新的版本。

## 使用 MSI 串流模式升級套件


當您在為套件排序期間產生 Windows Installer （MSI）檔案時，sequencer 會建立一個。包含所有必要發佈資訊的 MSI 檔案。 系統管理員必須複製。MSI 檔案至用戶端和。SFT 檔案，包含用戶端電腦可存取之網路共用的封裝內容。

若要將應用程式發佈到用戶端，請在用戶端電腦上執行下列命令：

   **Msiexec.exe/i \\\\PathToMsi\\packagename.msi MODE = 串流 OVERRIDEURL = \\\\\\\\server\\share\\package.sft**

".MSI 檔案會將應用程式發佈到用戶端，然後資料流程。SFT 檔案移至用戶端快取。

### 若要升級套件

若要新增版本，系統管理員必須部署新的。MSI 檔案至用戶端和新的。SFT 檔案移至網路共用。 然後，系統管理員必須執行部署套件所用的相同命令，但使用 new。MSI 檔案和新檔案。SFT 檔案，例如：

   **Msiexec.exe/i \\\\PathToMsi\\packagename\_2.msi MODE = 串流 OVERRIDEURL = \\\\\\\\server\\share\\package\_2.sft**

 

 





