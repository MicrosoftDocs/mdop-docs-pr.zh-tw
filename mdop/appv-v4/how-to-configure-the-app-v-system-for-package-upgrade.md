---
title: 如何設定 App-V 系統以升級封裝
description: 如何設定 App-V 系統以升級封裝
author: dansimp
ms.assetid: de133898-f887-46c1-9bc9-fbb03feac66a
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 5e5056f923c61aff39d9bd6e1d26f071177f7c12
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/26/2020
ms.locfileid: "10801581"
---
# <span data-ttu-id="ad2ea-103">如何設定 App-V 系統以升級封裝</span><span class="sxs-lookup"><span data-stu-id="ad2ea-103">How to Configure the App-V System for Package Upgrade</span></span>


<span data-ttu-id="ad2ea-104">當您部署已在 App-v 排序器中升級之現有應用程式套件的新版本時，您可以將它部署，以便 App-v 用戶端自動將新版本資料流程傳輸到本機快取。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-104">When you deploy a new version of an existing application package that has been upgraded in the App-V Sequencer, you can deploy it so that the App-V clients automatically stream the new version to the local cache.</span></span> <span data-ttu-id="ad2ea-105">視您使用的流式處理方案而定，會有不同的程式來設定套件升級。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-105">Depending on the streaming solution you use, there are different procedures for configuring the package upgrade.</span></span> <span data-ttu-id="ad2ea-106">下列各節說明最常見的發佈和資料流程案例，並包含針對每個案例設定套件升級所需的程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-106">The following sections describe the most typical scenarios for publishing and streaming, and include the procedures necessary for configuring the package upgrade for each scenario.</span></span>

## <span data-ttu-id="ad2ea-107">使用管理伺服器進行發佈與流式處理</span><span class="sxs-lookup"><span data-stu-id="ad2ea-107">Using a Management Server for both publishing and streaming</span></span>


<span data-ttu-id="ad2ea-108">在這種情況下，單一 App V 管理伺服器可用於套件和應用程式的發佈和資料流程，而且需要 RTSP （S）通訊協定。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-108">In this scenario, a single App-V Management Server is used for both publishing and streaming of packages and applications, and the RTSP(S) protocol is required.</span></span> <span data-ttu-id="ad2ea-109">當原始套件匯入到 App-v 管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-109">When the original package is imported to the App-V Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="ad2ea-110">系統管理員也會編輯 OSD 檔案中的 HREF 專案，以指向 [套件] 資料夾中的 SFT 檔案，然後將套件匯入伺服器。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-110">The administrator also edits the HREF entry in the OSD file to point to the SFT file in the package folder, and then imports the package to the server.</span></span>

<span data-ttu-id="ad2ea-111">當使用者由管理伺服器驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-111">When a user is authenticated by the Management Server, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="ad2ea-112">用戶端接著會從管理伺服器檢索應用程式的 OSD 檔案和圖示。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-112">The client then retrieves the OSD files and icons for the applications from the Management Server.</span></span> <span data-ttu-id="ad2ea-113">當使用者按兩下應用程式圖示時，應用程式內容會從 OSD 檔案中指定的路徑傳送到用戶端快取，並啟動應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-113">When the user double-clicks an application icon, the application content is streamed to the client cache from the path that is specified in the OSD file, and the application is started.</span></span>

### <span data-ttu-id="ad2ea-114">若要升級套件</span><span class="sxs-lookup"><span data-stu-id="ad2ea-114">To upgrade the package</span></span>

<span data-ttu-id="ad2ea-115">若要新增已在 App-v 排序器中升級之應用程式的新版本，系統管理員必須將新的 SFT 檔案及任何其他修改過的檔案複製到與應用程式原始版本相同的資料夾中。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-115">To add a new version of an application that has been upgraded in the App-V Sequencer, the administrator must copy the new SFT file and any other modified files to the same folder as the original version of the application.</span></span> <span data-ttu-id="ad2ea-116">系統管理員接著會使用 [伺服器管理] 主控台中的 [新增**版本**] 來新增套件的新版本。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-116">The administrator will then use **Add Version** in the server management console to add the new version of the package.</span></span>

<span data-ttu-id="ad2ea-117">當使用者下一次啟動應用程式時，伺服器會自動將新版本資料流程傳送給用戶端。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-117">When the user next starts the application, the server streams the new version to the client automatically.</span></span> <span data-ttu-id="ad2ea-118">這種升級套件的特定方法先前稱為 [作用中升級]。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-118">This specific method of upgrading a package was formerly known as an active upgrade.</span></span>

## <span data-ttu-id="ad2ea-119">使用管理伺服器來發佈及流式處理伺服器以進行流式處理</span><span class="sxs-lookup"><span data-stu-id="ad2ea-119">Using a Management Server for publishing and a Streaming Server for streaming</span></span>


<span data-ttu-id="ad2ea-120">在這種情況下，App-V 管理伺服器用於發佈套件，而流式處理伺服器則用於流式套件和應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-120">In this scenario, the App-V Management Server is used for publishing the packages, and the Streaming Server is used for streaming packages and applications.</span></span> <span data-ttu-id="ad2ea-121">需要 RTSP （S）協定。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-121">The RTSP(S) protocol is required.</span></span> <span data-ttu-id="ad2ea-122">當原始套件匯入管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-122">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="ad2ea-123">系統管理員編輯 OSD 檔案中的 HREF 專案，以指向流式處理伺服器上的 SFT 檔案，然後將套件匯入管理伺服器。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-123">The administrator edits the HREF entry in the OSD file to point to the SFT file on the Streaming Server, and then imports the package to the Management Server.</span></span>

<span data-ttu-id="ad2ea-124">若要設定流式處理伺服器，系統管理員會將 [套件] 資料夾從管理伺服器複製到流式處理伺服器上的 [內容] 資料夾。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-124">To set up the Streaming Server, the administrator copies the package folder from the Management Server to the CONTENT folder on the Streaming Server.</span></span> <span data-ttu-id="ad2ea-125">這個資料夾的名稱和相對路徑必須與管理伺服器上的資料流程伺服器內容資料夾相同，例如 \\\\streamingserver\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-125">This folder must have the same name and relative path under the Streaming Server’s CONTENT folder as on the Management Server, for example, \\\\streamingserver\\CONTENT\\packagename.</span></span>

<span data-ttu-id="ad2ea-126">如果用戶端的 [應用程式來源根（ASR）] 設定已設定為指向 [流式處理伺服器]，則用戶端會在 OSD 檔案的 HREF 專案中使用這個設定，而不是伺服器名稱。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-126">If the client’s Application Source Root (ASR) setting is configured to point to the Streaming Server, the client uses this setting instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="ad2ea-127">用戶端上的 ISR 與 OSR 欄位可以選擇性地設定為指向管理伺服器或流式處理伺服器（視所使用的特定系統架構而定）。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-127">The ISR and OSR fields on the client can optionally be configured to point to either the Management Server or the Streaming Server, depending on the specific system architecture that is used.</span></span>

<span data-ttu-id="ad2ea-128">當使用者由管理伺服器驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-128">When a user is authenticated by the Management Server, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="ad2ea-129">根據 [OSR] 和 [ISR] 欄位中的設定，用戶端會從流式處理伺服器或管理伺服器來檢索應用程式的 OSD 檔案和圖示。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-129">The client retrieves the OSD files and icons for the applications from either the Streaming Server or the Management Server, depending on the settings in the OSR and ISR fields.</span></span>

<span data-ttu-id="ad2ea-130">當使用者按兩下應用程式圖示時，用戶端會使用包含在 OSD file HREF 元素中之套件內容檔案（SFT）的路徑。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-130">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="ad2ea-131">如果使用 ASR，用戶端會將 HREF 元素中的伺服器名稱（以及埠和通訊協定）取代為在 ASR 中指定之流式處理伺服器的路徑。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-131">If the ASR is used the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the Streaming Server that is specified in the ASR.</span></span> <span data-ttu-id="ad2ea-132">然後，應用程式就會從流式伺服器傳送到用戶端快取，並啟動。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-132">The application is then streamed from the Streaming Server to the client cache and is started.</span></span>

### <span data-ttu-id="ad2ea-133">若要升級套件</span><span class="sxs-lookup"><span data-stu-id="ad2ea-133">To upgrade the package</span></span>

<span data-ttu-id="ad2ea-134">若要新增已在 App-v 排序器中升級之應用程式的新版本，系統管理員必須將新版本的 SFT 檔案及任何其他修改過的檔案複製到與流式伺服器上原始版本之應用程式相同的資料夾中。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-134">To add a new version of an application that has been upgraded in the App-V Sequencer, the administrator must copy the new version of the SFT file and any other modified files to the same folder as the original version of the application on the Streaming Server.</span></span>

<span data-ttu-id="ad2ea-135">為了保持一致性，我們建議您也將新檔案複製到管理伺服器上的資料夾。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-135">For consistency, we recommend that you copy new files to the folder on the Management Server as well.</span></span> <span data-ttu-id="ad2ea-136">特別是，如果您使用用戶端的 OSR 或 ISR 欄位，請將更新的 OSD 檔案和圖示複製到 [OSR] 和 [ISR] 欄位中指定的伺服器。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-136">In particular, if you use the client’s OSR or ISR fields, copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

<span data-ttu-id="ad2ea-137">在流式處理伺服器偵測到新版本之後，使用者下次啟動應用程式時，伺服器會自動將新版本資料流程傳送給用戶端。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-137">After the Streaming Server detects the new version, the next time the user starts the application, the server streams the new version to the client automatically.</span></span>

## <span data-ttu-id="ad2ea-138">使用管理伺服器來發佈及進行流式處理的 IIS 伺服器</span><span class="sxs-lookup"><span data-stu-id="ad2ea-138">Using a Management Server for publishing and an IIS Server for streaming</span></span>


<span data-ttu-id="ad2ea-139">在這種情況下，App V 管理伺服器是用來發佈套件，而 IIS 伺服器則用於流式套件和應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-139">In this scenario, the App-V Management Server is used for publishing the packages, and the IIS server is used for streaming packages and applications.</span></span> <span data-ttu-id="ad2ea-140">當原始套件匯入管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-140">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="ad2ea-141">系統管理員編輯 OSD 檔案中的 HREF 專案，使其指向 IIS 伺服器上的 SFT 檔案，然後將套件匯入管理伺服器。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-141">The administrator edits the HREF entry in the OSD file so it points to the SFT file on the IIS server, and then imports the package to the Management Server.</span></span>

<span data-ttu-id="ad2ea-142">若要設定用於流式處理的 IIS 伺服器，系統管理員會將 [套件] 資料夾從管理伺服器複製到 IIS 伺服器的 [內容] 資料夾。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-142">To set up the IIS server for streaming, the administrator copies the package folder from the Management Server to the CONTENT folder on the IIS Server.</span></span> <span data-ttu-id="ad2ea-143">這個資料夾的名稱和相對路徑必須與管理伺服器上的 IIS 伺服器 [網頁內容] 資料夾相同;例如，您可以使用 or 來存取 IIS 伺服器上的 URL http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename 。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-143">This folder must have the same name and relative path under the IIS server’s Web Content folder as on the Management Server; for example, the URL on the IIS Server can be accessed by using http://IISserver/CONTENT/packagename or https://IISserver/CONTENT/packagename.</span></span>

<span data-ttu-id="ad2ea-144">如果用戶端的 [應用程式來源根（ASR）] 設定已設定為指向 IIS 伺服器，則用戶端會在 OSD 檔案的 HREF 專案中使用 ASR，而不是伺服器名稱。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-144">If the client’s Application Source Root (ASR) setting is configured to point to the IIS Server, the client uses the ASR instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="ad2ea-145">您可以選擇性地設定用戶端上的 ISR 與 OSR 欄位，以指向管理伺服器或 IIS 伺服器（視您所使用的特定系統架構而定）。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-145">You can optionally configure the ISR and OSR fields on the client to point to either the Management Server or the IIS Server, depending on the specific system architecture that you use.</span></span>

<span data-ttu-id="ad2ea-146">當管理伺服器對使用者進行驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-146">When the Management Server authenticates the user, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="ad2ea-147">用戶端從 IIS 伺服器或管理伺服器檢索應用程式的 OSD 檔案和圖示，視 ISR 與 OSR 欄位中的設定而定。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-147">The client retrieves the OSD files and icons for the applications from either the IIS Server or the Management Server, depending on the settings in the ISR and OSR fields.</span></span>

<span data-ttu-id="ad2ea-148">當使用者按兩下應用程式圖示時，用戶端會使用包含在 OSD file HREF 元素中之套件內容檔案（SFT）的路徑。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-148">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="ad2ea-149">如果使用 ASR，用戶端會將 HREF 元素中的伺服器名稱（以及埠和通訊協定）替換為在 ASR 中指定之 IIS 伺服器的路徑。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-149">If the ASR is used the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the IIS Server that is specified in the ASR.</span></span> <span data-ttu-id="ad2ea-150">接著，應用程式就會使用 HTTP （S）通訊協定，從 IIS 伺服器傳送到用戶端快取。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-150">The application is then streamed from the IIS server to the client cache by using the HTTP(S) protocol and is started.</span></span>

### <span data-ttu-id="ad2ea-151">若要升級套件</span><span class="sxs-lookup"><span data-stu-id="ad2ea-151">To upgrade the package</span></span>

<span data-ttu-id="ad2ea-152">升級套件的程式如下所示：</span><span class="sxs-lookup"><span data-stu-id="ad2ea-152">The procedure to upgrade the package is as follows:</span></span>

-   <span data-ttu-id="ad2ea-153">將新版本的 OSD 檔案複製到管理伺服器內容資料夾下的原始版本資料夾（例如 \\\\server\\CONTENT\\packagename），然後取代現有的 OSD 檔案。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-153">Copy the new version of the OSD file to the original version’s folder under the Management Server’s CONTENT folder, for example \\\\server\\CONTENT\\packagename, and replace the existing OSD file.</span></span> <span data-ttu-id="ad2ea-154">為保持一致性，請複製任何其他修改過的檔案。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-154">For consistency, copy any other modified files, too.</span></span> <span data-ttu-id="ad2ea-155">如果使用用戶端的 OSR 或 ISR 欄位，則也會將更新的 OSD 檔案和圖示複製到 [OSR] 和 [ISR] 欄位中指定的伺服器。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-155">If the client’s OSR or ISR fields are used, then also copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

-   <span data-ttu-id="ad2ea-156">將新版本的 SFT 檔案複製到 IIS 伺服器的 [網頁內容] 資料夾底下的 [套件] 資料夾中;例如，您可以使用 or 來存取 IIS 伺服器上的 URL http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename 。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-156">Copy the new version of the SFT file to the package folder under the Web Content folder on the IIS server; for example, the URL on the IIS Server can be accessed by using http://IISserver/CONTENT/packagename or https://IISserver/CONTENT/packagename.</span></span>

<span data-ttu-id="ad2ea-157">在下一次發佈更新時，用戶端會使用新版本的 OSD 檔案進行更新。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-157">At the next publishing refresh, the client is updated with the new version of the OSD file.</span></span> <span data-ttu-id="ad2ea-158">此檔案現在會指向新版本的 SFT 檔案;因此，當使用者接著按兩下應用程式圖示時，就會啟動新的版本。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-158">This file now points to the new version of the SFT file; therefore, when the user next double-clicks an application icon, the new version is started.</span></span>

## <span data-ttu-id="ad2ea-159">使用管理伺服器發佈和檔案共用以進行流式處理</span><span class="sxs-lookup"><span data-stu-id="ad2ea-159">Using a Management Server for publishing and a File Share for Streaming</span></span>


<span data-ttu-id="ad2ea-160">在這種情況下，App-V 管理伺服器用於發佈套件，而檔案伺服器則用於流式套件和應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-160">In this scenario, the App-V Management Server is used for publishing the packages, and the file server is used for streaming packages and applications.</span></span> <span data-ttu-id="ad2ea-161">當原始套件匯入管理伺服器時，系統管理員會將包含由 sequencer 所建立之檔案的套件資料夾複製到 [內容] 資料夾，例如 \\\\server\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-161">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="ad2ea-162">系統管理員編輯 OSD 檔案中的 HREF 專案，讓它指向檔案伺服器上的 SFT 檔案，然後將套件匯入管理伺服器。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-162">The administrator edits the HREF entry in the OSD file so that it points to the SFT file on the file server, and imports the package to the Management Server.</span></span>

<span data-ttu-id="ad2ea-163">若要設定流式處理的檔案伺服器，系統管理員會將 [套件] 資料夾從管理伺服器複製到檔案伺服器上的 [內容] 資料夾。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-163">To set up the file server for streaming, the administrator copies the package folder from the Management Server to the CONTENT folder on the file server.</span></span> <span data-ttu-id="ad2ea-164">此資料夾的名稱和相對路徑必須與管理伺服器上的檔案伺服器內容資料夾相同（例如 \\\\fileserver\\CONTENT\\packagename.）。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-164">This folder must have the same name and relative path under the file server’s CONTENT folder as on the Management Server, for example \\\\fileserver\\CONTENT\\packagename.</span></span>

<span data-ttu-id="ad2ea-165">如果用戶端的應用程式來源根（ASR）設定設定為使用 UNC 路徑指向檔案伺服器（例如 \\\\fileserver\\content），用戶端會在 OSD 檔案的 HREF 專案中使用這個設定，而不是伺服器名稱。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-165">If the client’s Application Source Root (ASR) setting is configured to point to the file server by using a UNC path, for example \\\\fileserver\\content, the client uses this setting instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="ad2ea-166">系統管理員可以選擇性地設定用戶端上的 ISR 與 OSR 欄位，以指向管理伺服器或檔案伺服器（視所使用的特定系統架構而定）。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-166">The administrator can optionally configure the ISR and OSR fields on the client to point to either the Management Server or the file server, depending on the specific system architecture being used.</span></span>

<span data-ttu-id="ad2ea-167">當管理伺服器對使用者進行驗證時，伺服器會將 applist.xml 檔案傳送到用戶端，以發佈使用者的應用程式。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-167">When the Management Server authenticates the user, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="ad2ea-168">用戶端從檔案伺服器或管理伺服器上的應用程式來檢索 OSD 檔案和圖示，視 ISR 與 OSR 欄位中的設定而定。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-168">The client retrieves the OSD files and icons for the applications from either the file server or the Management Server, depending on the settings in the ISR and OSR fields.</span></span>

<span data-ttu-id="ad2ea-169">當使用者按兩下應用程式圖示時，用戶端會使用包含在 OSD file HREF 元素中之套件內容檔案（SFT）的路徑。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-169">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="ad2ea-170">如果使用 ASR，用戶端會將 HREF 元素中的伺服器名稱（以及埠和通訊協定）取代為在 ASR 中指定的檔案伺服器路徑。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-170">If the ASR is used, the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the file server that is specified in the ASR.</span></span> <span data-ttu-id="ad2ea-171">接著，應用程式就會從檔案伺服器傳送到用戶端快取，並啟動。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-171">The application is then streamed from the file server to the client cache and is started.</span></span>

### <span data-ttu-id="ad2ea-172">若要升級套件</span><span class="sxs-lookup"><span data-stu-id="ad2ea-172">To upgrade the package</span></span>

<span data-ttu-id="ad2ea-173">升級套件的程式如下所示：</span><span class="sxs-lookup"><span data-stu-id="ad2ea-173">The procedure to upgrade the package is as follows:</span></span>

-   <span data-ttu-id="ad2ea-174">將新版本的 OSD 檔案複製到管理伺服器內容資料夾下的原始版本資料夾，例如 \\\\server\\CONTENT\\packagename，取代現有的 OSD 檔案。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-174">Copy the new version of the OSD file to the original version’s folder under the Management Server’s CONTENT folder, for example \\\\server\\CONTENT\\packagename, replacing the existing OSD file.</span></span> <span data-ttu-id="ad2ea-175">您應該複製任何其他已修改的檔案，並加以保持一致性。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-175">Any other modified files should be copied as well for consistency.</span></span> <span data-ttu-id="ad2ea-176">如果使用用戶端的 OSR 或 ISR 欄位，則也會將更新的 OSD 檔案和圖示複製到 [OSR] 和 [ISR] 欄位中指定的伺服器。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-176">If the client’s OSR or ISR fields are used, then also copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

-   <span data-ttu-id="ad2ea-177">將新版本的 SFT 檔案複製到檔案伺服器的 [內容] 資料夾底下的 [套件] 資料夾，例如 \\\\fileserver\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-177">Copy the new version of the SFT file to the package folder under the CONTENT folder on the file server, for example \\\\fileserver\\CONTENT\\packagename.</span></span> <span data-ttu-id="ad2ea-178">將 V2 SFT 檔案複製到檔案伺服器上的內容共用下的資料夾，例如 \\\\fileserver\\CONTENT\\packagename\\V1。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-178">Copy the V2 SFT file to the folder under the CONTENT share on the file server, for example \\\\fileserver\\CONTENT\\packagename\\V1.</span></span>

<span data-ttu-id="ad2ea-179">在下一次發佈時，重新整理用戶端會使用新版本的 OSD 檔案進行更新。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-179">At the next publishing refresh the client is updated with the new version of the OSD file.</span></span> <span data-ttu-id="ad2ea-180">此檔案現在會指向新版本的 SFT 檔案，因此當使用者下一次按兩下應用程式圖示時，就會啟動新的版本。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-180">This file now points to new version of the SFT file, so when the user next double-clicks an application icon, the new version is started.</span></span>

## <span data-ttu-id="ad2ea-181">使用 MSI 串流模式升級套件</span><span class="sxs-lookup"><span data-stu-id="ad2ea-181">Upgrading the package by using MSI Streaming mode</span></span>


<span data-ttu-id="ad2ea-182">當您在為套件排序期間產生 Windows Installer （MSI）檔案時，sequencer 會建立一個。包含所有必要發佈資訊的 MSI 檔案。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-182">When you generate a Windows Installer (MSI) file during sequencing a package, the sequencer creates a .MSI file that contains all the necessary publishing information.</span></span> <span data-ttu-id="ad2ea-183">系統管理員必須複製。MSI 檔案至用戶端和。SFT 檔案，包含用戶端電腦可存取之網路共用的封裝內容。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-183">The administrator must copy the .MSI file to the client and the .SFT file containing the package content to a network share accessible by the client computer.</span></span>

<span data-ttu-id="ad2ea-184">若要將應用程式發佈到用戶端，請在用戶端電腦上執行下列命令：</span><span class="sxs-lookup"><span data-stu-id="ad2ea-184">To publish the application to the client, run the following command on the client computer:</span></span>

   **<span data-ttu-id="ad2ea-185">Msiexec.exe/i \\\\PathToMsi\\packagename.msi MODE = 串流 OVERRIDEURL = \\\\\\\\server\\share\\package.sft</span><span class="sxs-lookup"><span data-stu-id="ad2ea-185">Msiexec.exe /i \\\\PathToMsi\\packagename.msi MODE=STREAMING OVERRIDEURL=\\\\\\\\server\\share\\package.sft</span></span>**

<span data-ttu-id="ad2ea-186">".MSI 檔案會將應用程式發佈到用戶端，然後資料流程。SFT 檔案移至用戶端快取。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-186">The .MSI file publishes the applications to the client and then streams the .SFT file to the client cache.</span></span>

### <span data-ttu-id="ad2ea-187">若要升級套件</span><span class="sxs-lookup"><span data-stu-id="ad2ea-187">To upgrade the package</span></span>

<span data-ttu-id="ad2ea-188">若要新增版本，系統管理員必須部署新的。MSI 檔案至用戶端和新的。SFT 檔案移至網路共用。</span><span class="sxs-lookup"><span data-stu-id="ad2ea-188">To add a new version, an administrator must deploy a new .MSI file to the client and a new .SFT file to the network share.</span></span> <span data-ttu-id="ad2ea-189">然後，系統管理員必須執行部署套件所用的相同命令，但使用 new。MSI 檔案和新檔案。SFT 檔案，例如：</span><span class="sxs-lookup"><span data-stu-id="ad2ea-189">The administrator must then run the same command used to deploy the package, but use the new .MSI file and the new .SFT file, for example:</span></span>

   **<span data-ttu-id="ad2ea-190">Msiexec.exe/i \\\\PathToMsi\\packagename\_2.msi MODE = 串流 OVERRIDEURL = \\\\\\\\server\\share\\package\_2.sft</span><span class="sxs-lookup"><span data-stu-id="ad2ea-190">Msiexec.exe /i \\\\PathToMsi\\packagename\_2.msi MODE=STREAMING OVERRIDEURL=\\\\\\\\server\\share\\package\_2.sft</span></span>**

 

 





